<div class="card">
  <div class="flex" style="align-items:center; justify-content:space-between;">
    <h2>Menù della settimana <small class="muted">({{ weekLabel() }})</small></h2>
    <div class="flex" style="gap:8px">
      <button class="btn secondary" (click)="prevWeek()">← Settimana precedente</button>
      <button class="btn" (click)="nextWeek()">Settimana successiva →</button>
    </div>
  </div>

  <p *ngIf="message()" class="mt">{{ message() }}</p>
  <p *ngIf="loading()" class="mt muted">Caricamento…</p>

  <div class="grid mt" *ngIf="!loading()">
    <div class="event-card" *ngFor="let ev of items()">
      <div class="title">{{ ev.event_date | date:'EEEE d MMMM' }}</div>
      <div class="meta">
        <span class="badge">Partecipanti: {{ ev.participants }}</span>
        <span class="badge ocra">Totale spese: € {{ ev.total | number:'1.2-2' }}</span>
      </div>
      <p *ngIf="ev.notes" class="mt">{{ ev.notes }}</p>

      <div class="actions mt">
        <button class="btn rsvp-going" (click)="rsvp(ev, 'going')">Partecipo</button>
        <button class="btn rsvp-maybe" (click)="rsvp(ev, 'maybe')">Forse</button>
        <button class="btn rsvp-no" (click)="rsvp(ev, 'not_going')">No</button>
        <!--a class="btn secondary" [routerLink]="['/menus', ev.id]">Dettagli</a-->
      </div>
    </div>
  </div>

  <p *ngIf="!loading() && items().length === 0" class="mt muted">
    Nessun evento in questa settimana.
  </p>
</div>
